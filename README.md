# dadata

Взаимодействие с API dadata.ru

Инициализация объекта:

    ddt = dadata.New(<Токен>, [<Секретный ключ>])

Доступные методы:

**.suggest** - метод подсказок. Принимает текст запроса, тип запроса и количество вариантов в ответе.

    ddt.suggest(<Текст запроса>, <Тип запроса>, [{Параметры}], [{Фильтры}])

Допустимые типы запроса:

`address` - Адреса  
`party` - Организации  
`bank` - Банки  
`fio` - ФИО  
`email` - Email  
`fias` - ФИАС  
`fms_unit` - Кем выдан паспорт  
`postal_unit` - Почтовые отделения  
`fns_unit` - Налоговые инспекции  
`region_court` - Мировые суды  
`metro` - Станции метро  
`car_brand` - Марки автомобилей  
`country` - Страны  
`currency` - Валюты  
`okved2` - ОКВЭД  
`okpd2` - ОКПД

**.findById** - метод поиска по справочникам. Принимает текст запроса и тип справочника.

    ddt.findById(<Текст запроса>, <Тип справочника>, [{Параметры}])
  
Доступные типы справочников:

`address` - Адрес по коду КЛАДР или ФИАС  
`postal_unit` - Ближайшее почтовое отделение  
`delivery` - Идентификатор города в службах доставки  
`party` - Организация по ИНН или ОГРН  
`bank` - Банк по БИК, SWIFT, ИНН или регистрационному номеру  
`fias` - Адрес в ФИАС по идентификатору

**.clean** - метод стандартизации. Принимает текст запроса и тип объекта, в соответствии с которым нужно стандартизировать.  
**Внимание!** Для работы метода, объект DaData должен быть создан с секретным ключём.

    ddt.clean(<Текст запроса>, <Тип объекта>)

Пример:

    ddt.clean('Москва, Сухонская улица, 11 кв 89', 'address')
  
Доступные типы объектов:

`address` - Адреса  
`phone` - Телефоны  
`passport` - Паспорта  
`name` - ФИО  
`email` - Email  
`birthdate` - Даты  
`vehicle` - Автомобили

Для отправки составной записи в тексте запроса и в типе объекта должны быть списки с запросами и соответствующими типами, например:

    ddt.clean(["1", "Федотов Алексей", "Москва, Сухонская улица, 11 кв 89", "8 916 823 3454"], ["AS_IS", "NAME", "ADDRESS", "PHONE"])

Типы полей:

`ADDRESS` - Почтовый адрес
`PHONE` - Телефон
`PASSPORT` - Номер и серия паспорта
`NAME` - ФИО
`EMAIL` - Адрес электронной почты
`VEHICLE` - Марка и модель автомобиля
`IGNORE` - Игнорировать поле (будет отсутствовать в ответе)
`AS_IS` - Скопировать поле в ответ «как есть»

**.findAffiliated** - Метод поиска аффилированных компаний

    ddt.findAffiliated(<Текст запроса>, <Тип справочника>, [{Параметры}])

**.geolocate** - Метод поиска адреса по координатам. Принимает широту, долготу, количество вариантов в ответе, ограничение по радиусу от точки (в метрах) и язык ответа (ru/en).

    ddt.geolocate(<Широта>, <Долгота>, [<Кол-во вариантов>], [<Радиус>], [<Язык>])

**.iplocate** - Метод определения города по IP адресу.

    ddt.iplocate(<IP адресс>)
